{"version":3,"names":["RNE2EEManager","log","RNKeyProvider","useEffect","useState","useRNE2EEManager","options","keyProvider","keyProviderOptions","e2eeManager","setup","setSharedKey","sharedKey","error","warn","dispose"],"sources":["useE2EEManager.ts"],"sourcesContent":["import RNE2EEManager from '../e2ee/RNE2EEManager';\nimport { log, RNKeyProvider } from '..';\nimport { useEffect, useState } from 'react';\nimport type { RNKeyProviderOptions } from '../e2ee/RNKeyProvider';\n\nexport type UseRNE2EEManagerOptions = {\n  keyProviderOptions?: RNKeyProviderOptions;\n  sharedKey: string | Uint8Array;\n};\n\nexport interface RNE2EEManagerState {\n  keyProvider: RNKeyProvider;\n  e2eeManager: RNE2EEManager;\n}\n\n/**\n * @experimental\n */\nexport function useRNE2EEManager(\n  options: UseRNE2EEManagerOptions\n): RNE2EEManagerState {\n  let [keyProvider] = useState(\n    () => new RNKeyProvider(options.keyProviderOptions ?? {})\n  );\n  let [e2eeManager] = useState(() => new RNE2EEManager(keyProvider));\n\n  useEffect(() => {\n    let setup = async () => {\n      try {\n        await keyProvider.setSharedKey(options.sharedKey);\n      } catch (error) {\n        log.warn('unable to set shared key', error);\n      }\n    };\n    setup();\n    return () => {};\n  }, [keyProvider, options.sharedKey]);\n\n  useEffect(() => {\n    return () => {\n      keyProvider.dispose();\n    };\n  }, [keyProvider]);\n\n  return {\n    keyProvider,\n    e2eeManager,\n  };\n}\n"],"mappings":"AAAA,OAAOA,aAAa,MAAM,uBAAuB;AACjD,SAASC,GAAG,EAAEC,aAAa,QAAQ,IAAI;AACvC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAa3C;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAC9BC,OAAgC,EACZ;EACpB,IAAI,CAACC,WAAW,CAAC,GAAGH,QAAQ,CAC1B,MAAM,IAAIF,aAAa,CAACI,OAAO,CAACE,kBAAkB,IAAI,CAAC,CAAC,CAC1D,CAAC;EACD,IAAI,CAACC,WAAW,CAAC,GAAGL,QAAQ,CAAC,MAAM,IAAIJ,aAAa,CAACO,WAAW,CAAC,CAAC;EAElEJ,SAAS,CAAC,MAAM;IACd,IAAIO,KAAK,GAAG,MAAAA,CAAA,KAAY;MACtB,IAAI;QACF,MAAMH,WAAW,CAACI,YAAY,CAACL,OAAO,CAACM,SAAS,CAAC;MACnD,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdZ,GAAG,CAACa,IAAI,CAAC,0BAA0B,EAAED,KAAK,CAAC;MAC7C;IACF,CAAC;IACDH,KAAK,CAAC,CAAC;IACP,OAAO,MAAM,CAAC,CAAC;EACjB,CAAC,EAAE,CAACH,WAAW,EAAED,OAAO,CAACM,SAAS,CAAC,CAAC;EAEpCT,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXI,WAAW,CAACQ,OAAO,CAAC,CAAC;IACvB,CAAC;EACH,CAAC,EAAE,CAACR,WAAW,CAAC,CAAC;EAEjB,OAAO;IACLA,WAAW;IACXE;EACF,CAAC;AACH","ignoreList":[]}